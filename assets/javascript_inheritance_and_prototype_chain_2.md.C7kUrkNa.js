import{_ as n,c as a,o as e,ag as p}from"./chunks/framework.D-6U7MZ9.js";const l="/n-book/assets/inheritance_01.c6fB42K8.png",o="/n-book/assets/inheritance_02.C0mRSukn.png",r="/n-book/assets/create_vs_new_1.B4TGV52V.png",t="/n-book/assets/create_vs_new_2.Bg7qAVzH.png",c="/n-book/assets/constructor_1.CotyGsXD.png",i="/n-book/assets/constructor_2.6ov8-YW7.png",m=JSON.parse('{"title":"Inheritance and the prototype chain 2 (继承与原型链 - 下)","description":"","frontmatter":{},"headers":[],"relativePath":"javascript/inheritance_and_prototype_chain_2.md","filePath":"javascript/inheritance_and_prototype_chain_2.md","lastUpdated":1553078187000}'),y={name:"javascript/inheritance_and_prototype_chain_2.md"};function A(d,s,b,u,C,h){return e(),a("div",null,s[0]||(s[0]=[p(`<h1 id="inheritance-and-the-prototype-chain-2-继承与原型链-下" tabindex="-1">Inheritance and the prototype chain 2 (继承与原型链 - 下) <a class="header-anchor" href="#inheritance-and-the-prototype-chain-2-继承与原型链-下" aria-label="Permalink to &quot;Inheritance and the prototype chain 2 (继承与原型链 - 下)&quot;">​</a></h1><div class="warning custom-block"><p class="custom-block-title">Objective</p><p>To understand how it is possible to implement inheritance in JavaScript.</p></div><p><strong>How do we create an object in JavaScript that inherits from another object?</strong></p><h2 id="getting-started" tabindex="-1">Getting started <a class="header-anchor" href="#getting-started" aria-label="Permalink to &quot;Getting started&quot;">​</a></h2><p>we&#39;ve defined only the properties inside the constructor. The methods are all defined on the constructor&#39;s prototype. For example:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki everforest-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E67E80;">function</span><span style="color:#A7C080;"> Person</span><span style="color:#D3C6AA;">(first,</span><span style="color:#D3C6AA;"> last,</span><span style="color:#D3C6AA;"> age,</span><span style="color:#D3C6AA;"> gender,</span><span style="color:#D3C6AA;"> interests)</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#D699B6;">  this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">name</span><span style="color:#E69875;"> =</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#D3C6AA;">    first,</span></span>
<span class="line"><span style="color:#D3C6AA;">    last</span></span>
<span class="line"><span style="color:#D3C6AA;">  };</span></span>
<span class="line"><span style="color:#D699B6;">  this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">age</span><span style="color:#E69875;"> =</span><span style="color:#D3C6AA;"> age;</span></span>
<span class="line"><span style="color:#D699B6;">  this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">gender</span><span style="color:#E69875;"> =</span><span style="color:#D3C6AA;"> gender;</span></span>
<span class="line"><span style="color:#D699B6;">  this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">interests</span><span style="color:#E69875;"> =</span><span style="color:#D3C6AA;"> interests;</span></span>
<span class="line"><span style="color:#D3C6AA;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7FBBB3;">Person</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">prototype</span><span style="color:#859289;">.</span><span style="color:#A7C080;">greeting</span><span style="color:#E69875;"> =</span><span style="color:#E67E80;"> function</span><span style="color:#D3C6AA;">()</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#A7C080;">  alert</span><span style="color:#D3C6AA;">(</span><span style="color:#DBBC7F;">&quot;Hi! I&#39;m &quot;</span><span style="color:#E69875;"> +</span><span style="color:#D699B6;"> this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">name</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">first</span><span style="color:#E69875;"> +</span><span style="color:#DBBC7F;"> &quot;.&quot;</span><span style="color:#D3C6AA;">);</span></span>
<span class="line"><span style="color:#D3C6AA;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Then we wanted to create a <code>Teacher</code> class, like the one we described in our initial object-oriented definition, which inherits all the members from <code>Person</code>, but also includes:</p><ol><li>A new property, <code>subject</code> — this will contain the subject the teacher teaches.</li><li>An updated <code>greeting()</code>method, which sounds a bit more formal than the standard <code>greeting()</code> method — more suitable for a teacher addressing some students at school.</li></ol><p>we need to do is create a <code>Teacher()</code> constructor — add the following below the existing code:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki everforest-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E67E80;">function</span><span style="color:#A7C080;"> Teacher</span><span style="color:#D3C6AA;">(first,</span><span style="color:#D3C6AA;"> last,</span><span style="color:#D3C6AA;"> age,</span><span style="color:#D3C6AA;"> gender,</span><span style="color:#D3C6AA;"> interests,</span><span style="color:#D3C6AA;"> subject)</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#D3C6AA;">  Person</span><span style="color:#859289;">.</span><span style="color:#A7C080;">call</span><span style="color:#D3C6AA;">(</span><span style="color:#D699B6;">this</span><span style="color:#D3C6AA;">,</span><span style="color:#D3C6AA;"> first,</span><span style="color:#D3C6AA;"> last,</span><span style="color:#D3C6AA;"> age,</span><span style="color:#D3C6AA;"> gender,</span><span style="color:#D3C6AA;"> interests);</span></span>
<span class="line"><span style="color:#D699B6;">  this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">subject</span><span style="color:#E69875;"> =</span><span style="color:#D3C6AA;"> subject;</span></span>
<span class="line"><span style="color:#D3C6AA;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>the <code>call()</code> function. This function basically allows you to call a function defined somewhere else, but in the current context. The first parameter specifies the value of this that you want to use when running the function, and the other parameters are those that should be passed to the function when it is invoked.</p></blockquote><p>We want the <code>Teacher()</code> constructor to take the same parameters as the <code>Person()</code> constructor it is inheriting from, so we specify them all as parameters in the <code>call()</code> invocation.</p><h2 id="setting-teacher-s-prototype-and-constructor-reference" tabindex="-1">Setting Teacher()&#39;s prototype and constructor reference <a class="header-anchor" href="#setting-teacher-s-prototype-and-constructor-reference" aria-label="Permalink to &quot;Setting Teacher()&#39;s prototype and constructor reference&quot;">​</a></h2><p>But we have a problem. We have defined a new constructor —— <code>Teacher</code>, and it has a prototype property, which by default just contains a reference to the constructor function itself. It does not contain the methods of the <code>Person</code> constructor&#39;s prototype property.</p><p><img src="`+l+'" alt="inheritance_01"></p><p>并且比较<code>Person.prototype</code>和<code>Teacher.prototype</code>上的<code>property</code>，我们发现<code>Teacher</code>并没有继承<code>Person.prototype.greeting</code>。</p><p>But we need to get <code>Teacher()</code> to inherit the methods defined on <code>Person()&#39;s prototype</code>. So how do we do that?</p><ol><li>Add the following line below your previous addition:</li></ol><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki everforest-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#7FBBB3;">Teacher</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">prototype </span><span style="color:#E69875;">=</span><span style="color:#D3C6AA;"> Object</span><span style="color:#859289;">.</span><span style="color:#A7C080;">create</span><span style="color:#D3C6AA;">(</span><span style="color:#7FBBB3;">Person</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">prototype);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="2"><li>But <code>Teacher.prototype&#39;s constructor</code> property is now equal to <code>Person()</code>, because we just set <code>Teacher.prototype</code> to reference an object that inherits its properties from <code>Person.prototype</code>! so we need to add the following line at the bottom:</li></ol><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki everforest-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#7FBBB3;">Teacher</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">prototype</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">constructor </span><span style="color:#E69875;">=</span><span style="color:#D3C6AA;"> Teacher;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+o+`" alt="inheritance_02"></p><p>Entering <code>Teacher.prototype.constructor</code>should return <code>Teacher()</code>, as desired, plus we are now inheriting from <code>Person()</code>!</p><h2 id="giving-teacher-a-new-greeting-function" tabindex="-1">Giving Teacher() a new greeting() function <a class="header-anchor" href="#giving-teacher-a-new-greeting-function" aria-label="Permalink to &quot;Giving Teacher() a new greeting() function&quot;">​</a></h2><p>If we need to define <code>a new greeting() function</code> on the <code>Teacher()</code> constructor. The easiest way to do this is to define it on <code>Teacher()&#39;s prototype</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki everforest-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#7FBBB3;">Teacher</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">prototype</span><span style="color:#859289;">.</span><span style="color:#A7C080;">greeting</span><span style="color:#E69875;"> =</span><span style="color:#E67E80;"> function</span><span style="color:#D3C6AA;">()</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#859289;font-style:italic;">  // balabala code...</span></span>
<span class="line"><span style="color:#D3C6AA;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="es6-classes" tabindex="-1">ES6 Classes <a class="header-anchor" href="#es6-classes" aria-label="Permalink to &quot;ES6 Classes&quot;">​</a></h2><h3 id="rewritten-version-with-class-style" tabindex="-1">rewritten version with class-style <a class="header-anchor" href="#rewritten-version-with-class-style" aria-label="Permalink to &quot;rewritten version with class-style&quot;">​</a></h3><p>we&#39;ll convert the <code>Person and Teacher examples</code> from prototypal inheritance to classes, to show you how it&#39;s done: Let&#39;s look at a rewritten version of the Person example, class-style:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki everforest-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E67E80;">class</span><span style="color:#7FBBB3;"> Person</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#859289;font-style:italic;">  // The constructor() method defines the constructor function that represents our Person class.</span></span>
<span class="line"><span style="color:#E69875;">  constructor</span><span style="color:#D3C6AA;">(first, last, age, gender, interests) {</span></span>
<span class="line"><span style="color:#D699B6;">    this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">name </span><span style="color:#E69875;">=</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#D3C6AA;">      first,</span></span>
<span class="line"><span style="color:#D3C6AA;">      last</span></span>
<span class="line"><span style="color:#D3C6AA;">    };</span></span>
<span class="line"><span style="color:#D699B6;">    this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">age </span><span style="color:#E69875;">=</span><span style="color:#D3C6AA;"> age;</span></span>
<span class="line"><span style="color:#D699B6;">    this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">gender </span><span style="color:#E69875;">=</span><span style="color:#D3C6AA;"> gender;</span></span>
<span class="line"><span style="color:#D699B6;">    this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">interests </span><span style="color:#E69875;">=</span><span style="color:#D3C6AA;"> interests;</span></span>
<span class="line"><span style="color:#D3C6AA;">  }</span></span>
<span class="line"><span style="color:#859289;font-style:italic;">  // greeting() is class methods.</span></span>
<span class="line"><span style="color:#A7C080;">  greeting</span><span style="color:#D3C6AA;">() {</span></span>
<span class="line"><span style="color:#D3C6AA;">    console</span><span style="color:#859289;">.</span><span style="color:#A7C080;">log</span><span style="color:#D3C6AA;">(</span><span style="color:#DBBC7F;">\`Hi! I&#39;m </span><span style="color:#A7C080;">\${</span><span style="color:#D699B6;">this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">name</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">first</span><span style="color:#A7C080;">}</span><span style="color:#DBBC7F;">\`</span><span style="color:#D3C6AA;">);</span></span>
<span class="line"><span style="color:#D3C6AA;">  }</span></span>
<span class="line"><span style="color:#D3C6AA;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>We can now instantiate object instances using the <code>new</code> operator, in just the same way as we did before:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki everforest-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E69875;">let</span><span style="color:#D3C6AA;"> han </span><span style="color:#E69875;">=</span><span style="color:#E67E80;"> new</span><span style="color:#A7C080;"> Person</span><span style="color:#D3C6AA;">(</span><span style="color:#DBBC7F;">&quot;Han&quot;</span><span style="color:#D3C6AA;">, </span><span style="color:#DBBC7F;">&quot;Solo&quot;</span><span style="color:#D3C6AA;">, </span><span style="color:#D699B6;">25</span><span style="color:#D3C6AA;">, </span><span style="color:#DBBC7F;">&quot;male&quot;</span><span style="color:#D3C6AA;">, [</span><span style="color:#DBBC7F;">&quot;Smuggling&quot;</span><span style="color:#D3C6AA;">]);</span></span>
<span class="line"><span style="color:#D3C6AA;">han</span><span style="color:#859289;">.</span><span style="color:#A7C080;">greeting</span><span style="color:#D3C6AA;">(); </span><span style="color:#859289;font-style:italic;">// Hi! I&#39;m Han</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="inheritance-with-class-syntax" tabindex="-1">Inheritance with class syntax <a class="header-anchor" href="#inheritance-with-class-syntax" aria-label="Permalink to &quot;Inheritance with class syntax&quot;">​</a></h3><p>we&#39;ll create our specialized <code>Teacher</code> class, making it inherit from <code>Person</code> using modern class syntax. To create a subclass we use the <code>extends</code> keyword to tell JavaScript the class we want to base our class on.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki everforest-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E67E80;">class</span><span style="color:#7FBBB3;"> Teacher</span><span style="color:#E69875;"> extends</span><span style="color:#7FBBB3;"> Person</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#E69875;">  constructor</span><span style="color:#D3C6AA;">(first, last, age, gender, interests, subject, grade) {</span></span>
<span class="line"><span style="color:#D699B6;">    this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">name </span><span style="color:#E69875;">=</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#D3C6AA;">      first,</span></span>
<span class="line"><span style="color:#D3C6AA;">      last</span></span>
<span class="line"><span style="color:#D3C6AA;">    };</span></span>
<span class="line"><span style="color:#D699B6;">    this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">age </span><span style="color:#E69875;">=</span><span style="color:#D3C6AA;"> age;</span></span>
<span class="line"><span style="color:#D699B6;">    this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">gender </span><span style="color:#E69875;">=</span><span style="color:#D3C6AA;"> gender;</span></span>
<span class="line"><span style="color:#D699B6;">    this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">interests </span><span style="color:#E69875;">=</span><span style="color:#D3C6AA;"> interests;</span></span>
<span class="line"><span style="color:#859289;font-style:italic;">    // subject and grade are specific to Teacher</span></span>
<span class="line"><span style="color:#D699B6;">    this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">subject </span><span style="color:#E69875;">=</span><span style="color:#D3C6AA;"> subject;</span></span>
<span class="line"><span style="color:#D699B6;">    this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">grade </span><span style="color:#E69875;">=</span><span style="color:#D3C6AA;"> grade;</span></span>
<span class="line"><span style="color:#D3C6AA;">  }</span></span>
<span class="line"><span style="color:#D3C6AA;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>重复声明<code>Person</code>的属性显然是不必要的，我们可以使用<code>super</code>关键词来简化代码：</p><blockquote><p>the <code>super()</code> operator as the first item inside the <code>constructor()</code>. <strong>This will call the parent class’ constructor, and inherit the members we specify as parameters of <code>super()</code></strong></p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki everforest-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E67E80;">class</span><span style="color:#7FBBB3;"> Teacher</span><span style="color:#E69875;"> extends</span><span style="color:#7FBBB3;"> Person</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#E69875;">  constructor</span><span style="color:#D3C6AA;">(first, last, age, gender, interests, subject, grade) {</span></span>
<span class="line"><span style="color:#D699B6;">    super</span><span style="color:#D3C6AA;">(first, last, age, gender, interests);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#859289;font-style:italic;">    // subject and grade are specific to Teacher</span></span>
<span class="line"><span style="color:#D699B6;">    this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">subject </span><span style="color:#E69875;">=</span><span style="color:#D3C6AA;"> subject;</span></span>
<span class="line"><span style="color:#D699B6;">    this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">grade </span><span style="color:#E69875;">=</span><span style="color:#D3C6AA;"> grade;</span></span>
<span class="line"><span style="color:#D3C6AA;">  }</span></span>
<span class="line"><span style="color:#D3C6AA;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>When we instantiate Teacher object instances, we can now call methods and properties defined on both <code>Teacher</code> and <code>Person</code>, as we&#39;d expect:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki everforest-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E69875;">let</span><span style="color:#D3C6AA;"> snape </span><span style="color:#E69875;">=</span><span style="color:#E67E80;"> new</span><span style="color:#A7C080;"> Teacher</span><span style="color:#D3C6AA;">(</span></span>
<span class="line"><span style="color:#DBBC7F;">  &quot;Severus&quot;</span><span style="color:#D3C6AA;">,</span></span>
<span class="line"><span style="color:#DBBC7F;">  &quot;Snape&quot;</span><span style="color:#D3C6AA;">,</span></span>
<span class="line"><span style="color:#D699B6;">  58</span><span style="color:#D3C6AA;">,</span></span>
<span class="line"><span style="color:#DBBC7F;">  &quot;male&quot;</span><span style="color:#D3C6AA;">,</span></span>
<span class="line"><span style="color:#D3C6AA;">  [</span><span style="color:#DBBC7F;">&quot;Potions&quot;</span><span style="color:#D3C6AA;">],</span></span>
<span class="line"><span style="color:#DBBC7F;">  &quot;Dark arts&quot;</span><span style="color:#D3C6AA;">,</span></span>
<span class="line"><span style="color:#D699B6;">  5</span></span>
<span class="line"><span style="color:#D3C6AA;">);</span></span>
<span class="line"><span style="color:#D3C6AA;">snape</span><span style="color:#859289;">.</span><span style="color:#A7C080;">greeting</span><span style="color:#D3C6AA;">(); </span><span style="color:#859289;font-style:italic;">// Hi! I&#39;m Severus.</span></span>
<span class="line"><span style="color:#D3C6AA;">snape</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">age; </span><span style="color:#859289;font-style:italic;">// 58</span></span>
<span class="line"><span style="color:#D3C6AA;">snape</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">subject; </span><span style="color:#859289;font-style:italic;">// Dark arts</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="inheriting-from-a-constructor-with-no-parameters" tabindex="-1">Inheriting from a constructor with no parameters <a class="header-anchor" href="#inheriting-from-a-constructor-with-no-parameters" aria-label="Permalink to &quot;Inheriting from a constructor with no parameters&quot;">​</a></h2><p>Note that if the constructor you are inheriting from doesn&#39;t take its property values from parameters, you don&#39;t need to specify them as additional arguments in <code>call()</code>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki everforest-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E67E80;">function</span><span style="color:#A7C080;"> Brick</span><span style="color:#D3C6AA;">()</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#D699B6;">  this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">width</span><span style="color:#E69875;"> =</span><span style="color:#D699B6;"> 10</span><span style="color:#D3C6AA;">;</span></span>
<span class="line"><span style="color:#D699B6;">  this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">height</span><span style="color:#E69875;"> =</span><span style="color:#D699B6;"> 20</span><span style="color:#D3C6AA;">;</span></span>
<span class="line"><span style="color:#D3C6AA;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>You could inherit the <code>width</code> and <code>height</code> properties by doing this:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki everforest-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E67E80;">function</span><span style="color:#A7C080;"> BlueGlassBrick</span><span style="color:#D3C6AA;">()</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#D3C6AA;">  Brick</span><span style="color:#859289;">.</span><span style="color:#A7C080;">call</span><span style="color:#D3C6AA;">(</span><span style="color:#D699B6;">this</span><span style="color:#D3C6AA;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D699B6;">  this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">opacity</span><span style="color:#E69875;"> =</span><span style="color:#D699B6;"> 0</span><span style="color:#D3C6AA;">.</span><span style="color:#D699B6;">5</span><span style="color:#D3C6AA;">;</span></span>
<span class="line"><span style="color:#D699B6;">  this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">color</span><span style="color:#E69875;"> =</span><span style="color:#DBBC7F;"> &quot;blue&quot;</span><span style="color:#D3C6AA;">;</span></span>
<span class="line"><span style="color:#D3C6AA;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Note that we&#39;ve only specified <code>this</code> inside <code>call()</code> — no other parameters are required as we are not inheriting any properties from the parent that are set via parameters.</p><h2 id="拓展理解" tabindex="-1">拓展理解 <a class="header-anchor" href="#拓展理解" aria-label="Permalink to &quot;拓展理解&quot;">​</a></h2><h3 id="提问环节" tabindex="-1">提问环节 <a class="header-anchor" href="#提问环节" aria-label="Permalink to &quot;提问环节&quot;">​</a></h3><p>寄生组合继承的做法：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki everforest-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E67E80;">function</span><span style="color:#A7C080;"> Person</span><span style="color:#D3C6AA;">(first,</span><span style="color:#D3C6AA;"> last,</span><span style="color:#D3C6AA;"> age,</span><span style="color:#D3C6AA;"> gender,</span><span style="color:#D3C6AA;"> interests)</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#D699B6;">  this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">name</span><span style="color:#E69875;"> =</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#D3C6AA;">    first,</span></span>
<span class="line"><span style="color:#D3C6AA;">    last</span></span>
<span class="line"><span style="color:#D3C6AA;">  };</span></span>
<span class="line"><span style="color:#D699B6;">  this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">age</span><span style="color:#E69875;"> =</span><span style="color:#D3C6AA;"> age;</span></span>
<span class="line"><span style="color:#D699B6;">  this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">gender</span><span style="color:#E69875;"> =</span><span style="color:#D3C6AA;"> gender;</span></span>
<span class="line"><span style="color:#D699B6;">  this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">interests</span><span style="color:#E69875;"> =</span><span style="color:#D3C6AA;"> interests;</span></span>
<span class="line"><span style="color:#D3C6AA;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7FBBB3;">Person</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">prototype</span><span style="color:#859289;">.</span><span style="color:#A7C080;">greeting</span><span style="color:#E69875;"> =</span><span style="color:#E67E80;"> function</span><span style="color:#D3C6AA;">()</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#A7C080;">  alert</span><span style="color:#D3C6AA;">(</span><span style="color:#DBBC7F;">&quot;Hi! I&#39;m &quot;</span><span style="color:#E69875;"> +</span><span style="color:#D699B6;"> this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">name</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">first</span><span style="color:#E69875;"> +</span><span style="color:#DBBC7F;"> &quot;.&quot;</span><span style="color:#D3C6AA;">);</span></span>
<span class="line"><span style="color:#D3C6AA;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E67E80;">function</span><span style="color:#A7C080;"> Teacher</span><span style="color:#D3C6AA;">(first,</span><span style="color:#D3C6AA;"> last,</span><span style="color:#D3C6AA;"> age,</span><span style="color:#D3C6AA;"> gender,</span><span style="color:#D3C6AA;"> interests,</span><span style="color:#D3C6AA;"> subject)</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#D3C6AA;">  Person</span><span style="color:#859289;">.</span><span style="color:#A7C080;">call</span><span style="color:#D3C6AA;">(</span><span style="color:#D699B6;">this</span><span style="color:#D3C6AA;">,</span><span style="color:#D3C6AA;"> first,</span><span style="color:#D3C6AA;"> last,</span><span style="color:#D3C6AA;"> age,</span><span style="color:#D3C6AA;"> gender,</span><span style="color:#D3C6AA;"> interests);</span></span>
<span class="line"><span style="color:#D699B6;">  this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">subject</span><span style="color:#E69875;"> =</span><span style="color:#D3C6AA;"> subject;</span></span>
<span class="line"><span style="color:#D3C6AA;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7FBBB3;">Teacher</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">prototype </span><span style="color:#E69875;">=</span><span style="color:#D3C6AA;"> Object</span><span style="color:#859289;">.</span><span style="color:#A7C080;">create</span><span style="color:#D3C6AA;">(</span><span style="color:#7FBBB3;">Person</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">prototype);</span></span>
<span class="line"><span style="color:#7FBBB3;">Teacher</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">prototype</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">constructor </span><span style="color:#E69875;">=</span><span style="color:#D3C6AA;"> Teacher;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>这里有个比较点，</p><p><code>Teacher.prototype = Object.create(Person.prototype);</code>，</p><p>有人也会写成</p><p><code>Teacher.prototype = new Person();</code>，</p><p>于是便有个问题：<code>Object.create()</code> 和 <code>new</code> 有什么区别？</p><p>以及另外一个问题，<code>Teacher.prototype.constructor = Teacher;</code> 为什么要这样做？</p><h3 id="object-create源码解析" tabindex="-1">Object.create源码解析 <a class="header-anchor" href="#object-create源码解析" aria-label="Permalink to &quot;Object.create源码解析&quot;">​</a></h3><blockquote><p>The Object.create() method creates a new object, using an existing object as the prototype of the newly created object.(Object.create()方法创建一个新对象，使用现有的对象 作为 新创建的对象的 prototype)</p></blockquote><p>Object.create 的源码本质就三行：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki everforest-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E67E80;">if</span><span style="color:#D3C6AA;"> (</span><span style="color:#E67E80;">typeof</span><span style="color:#D3C6AA;"> Object</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">create </span><span style="color:#E69875;">!==</span><span style="color:#DBBC7F;"> &quot;function&quot;</span><span style="color:#D3C6AA;">) {</span></span>
<span class="line"><span style="color:#D3C6AA;">  Object</span><span style="color:#859289;">.</span><span style="color:#A7C080;">create</span><span style="color:#E69875;"> =</span><span style="color:#E67E80;"> function</span><span style="color:#D3C6AA;"> (proto,</span><span style="color:#D3C6AA;"> propertiesObject)</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#E67E80;">    if</span><span style="color:#D3C6AA;"> (</span><span style="color:#E67E80;">typeof</span><span style="color:#D3C6AA;"> proto</span><span style="color:#E69875;"> !==</span><span style="color:#DBBC7F;"> &#39;object&#39;</span><span style="color:#E69875;"> &amp;&amp;</span><span style="color:#E67E80;"> typeof</span><span style="color:#D3C6AA;"> proto</span><span style="color:#E69875;"> !==</span><span style="color:#DBBC7F;"> &#39;function&#39;</span><span style="color:#D3C6AA;">)</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#E67E80;">      throw</span><span style="color:#E67E80;"> new</span><span style="color:#A7C080;"> TypeError</span><span style="color:#D3C6AA;">(</span><span style="color:#DBBC7F;">&#39;Object prototype may only be an Object: &#39;</span><span style="color:#E69875;"> +</span><span style="color:#D3C6AA;"> proto);</span></span>
<span class="line"><span style="color:#D3C6AA;">    }</span><span style="color:#E67E80;"> else</span><span style="color:#E67E80;"> if</span><span style="color:#D3C6AA;"> (proto</span><span style="color:#E69875;"> ===</span><span style="color:#D699B6;"> null</span><span style="color:#D3C6AA;">)</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#E67E80;">      throw</span><span style="color:#E67E80;"> new</span><span style="color:#A7C080;"> Error</span><span style="color:#D3C6AA;">(</span><span style="color:#DBBC7F;">&quot;This browser&#39;s implementation of Object.create is a shim and doesn&#39;t support &#39;null&#39; as the first argument.&quot;</span><span style="color:#D3C6AA;">);</span></span>
<span class="line"><span style="color:#D3C6AA;">    }</span></span>
<span class="line"><span style="color:#E67E80;">    if</span><span style="color:#D3C6AA;"> (</span><span style="color:#E67E80;">typeof</span><span style="color:#D3C6AA;"> propertiesObject</span><span style="color:#E69875;"> !=</span><span style="color:#DBBC7F;"> &#39;undefined&#39;</span><span style="color:#D3C6AA;">)</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#E67E80;">      throw</span><span style="color:#E67E80;"> new</span><span style="color:#A7C080;"> Error</span><span style="color:#D3C6AA;">(</span><span style="color:#DBBC7F;">&quot;This browser&#39;s implementation of Object.create is a shim and doesn&#39;t support a second argument.&quot;</span><span style="color:#D3C6AA;">);</span></span>
<span class="line"><span style="color:#D3C6AA;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E67E80;">    function</span><span style="color:#A7C080;"> F</span><span style="color:#D3C6AA;">()</span><span style="color:#D3C6AA;"> {}</span></span>
<span class="line"><span style="color:#7FBBB3;">    F</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">prototype</span><span style="color:#E69875;"> =</span><span style="color:#D3C6AA;"> proto;</span></span>
<span class="line"><span style="color:#E67E80;">    return</span><span style="color:#E67E80;"> new</span><span style="color:#A7C080;"> F</span><span style="color:#D3C6AA;">();</span></span>
<span class="line"><span style="color:#D3C6AA;">  };</span></span>
<span class="line"><span style="color:#D3C6AA;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>简化下来就是这样，把传入的对象，作为新的对象的prototype，返回新的对象。</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki everforest-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#D3C6AA;">Object</span><span style="color:#859289;">.</span><span style="color:#A7C080;">create</span><span style="color:#E69875;"> =</span><span style="color:#E67E80;"> function</span><span style="color:#D3C6AA;"> (proto,</span><span style="color:#D3C6AA;"> propertiesObject)</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#E67E80;">  function</span><span style="color:#A7C080;"> F</span><span style="color:#D3C6AA;">()</span><span style="color:#D3C6AA;"> {}</span></span>
<span class="line"><span style="color:#7FBBB3;">  F</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">prototype</span><span style="color:#E69875;"> =</span><span style="color:#D3C6AA;"> proto;</span></span>
<span class="line"><span style="color:#E67E80;">  return</span><span style="color:#E67E80;"> new</span><span style="color:#A7C080;"> F</span><span style="color:#D3C6AA;">();</span></span>
<span class="line"><span style="color:#D3C6AA;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="通过实例来看object-create和new的区别" tabindex="-1">通过实例来看Object.create和new的区别 <a class="header-anchor" href="#通过实例来看object-create和new的区别" aria-label="Permalink to &quot;通过实例来看Object.create和new的区别&quot;">​</a></h3><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki everforest-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E67E80;">function</span><span style="color:#A7C080;"> Person</span><span style="color:#D3C6AA;">(first,</span><span style="color:#D3C6AA;"> last,</span><span style="color:#D3C6AA;"> age,</span><span style="color:#D3C6AA;"> gender,</span><span style="color:#D3C6AA;"> interests)</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#D699B6;">  this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">name</span><span style="color:#E69875;"> =</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#D3C6AA;">    first,</span></span>
<span class="line"><span style="color:#D3C6AA;">    last</span></span>
<span class="line"><span style="color:#D3C6AA;">  };</span></span>
<span class="line"><span style="color:#D699B6;">  this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">age</span><span style="color:#E69875;"> =</span><span style="color:#D3C6AA;"> age;</span></span>
<span class="line"><span style="color:#D699B6;">  this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">gender</span><span style="color:#E69875;"> =</span><span style="color:#D3C6AA;"> gender;</span></span>
<span class="line"><span style="color:#D699B6;">  this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">interests</span><span style="color:#E69875;"> =</span><span style="color:#D3C6AA;"> interests;</span></span>
<span class="line"><span style="color:#D3C6AA;">}</span></span>
<span class="line"><span style="color:#7FBBB3;">Person</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">prototype</span><span style="color:#859289;">.</span><span style="color:#A7C080;">greeting</span><span style="color:#E69875;"> =</span><span style="color:#E67E80;"> function</span><span style="color:#D3C6AA;">()</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#A7C080;">  alert</span><span style="color:#D3C6AA;">(</span><span style="color:#DBBC7F;">&quot;Hi! I&#39;m &quot;</span><span style="color:#E69875;"> +</span><span style="color:#D699B6;"> this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">name</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">first</span><span style="color:#E69875;"> +</span><span style="color:#DBBC7F;"> &quot;.&quot;</span><span style="color:#D3C6AA;">);</span></span>
<span class="line"><span style="color:#D3C6AA;">};</span></span>
<span class="line"><span style="color:#E67E80;">function</span><span style="color:#A7C080;"> Teacher</span><span style="color:#D3C6AA;">(first,</span><span style="color:#D3C6AA;"> last,</span><span style="color:#D3C6AA;"> age,</span><span style="color:#D3C6AA;"> gender,</span><span style="color:#D3C6AA;"> interests,</span><span style="color:#D3C6AA;"> subject)</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#D3C6AA;">  Person</span><span style="color:#859289;">.</span><span style="color:#A7C080;">call</span><span style="color:#D3C6AA;">(</span><span style="color:#D699B6;">this</span><span style="color:#D3C6AA;">,</span><span style="color:#D3C6AA;"> first,</span><span style="color:#D3C6AA;"> last,</span><span style="color:#D3C6AA;"> age,</span><span style="color:#D3C6AA;"> gender,</span><span style="color:#D3C6AA;"> interests);</span></span>
<span class="line"><span style="color:#D699B6;">  this</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">subject</span><span style="color:#E69875;"> =</span><span style="color:#D3C6AA;"> subject;</span></span>
<span class="line"><span style="color:#D3C6AA;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>我们声明好上面的 Person 以及 Teacher，在赋值给Teacher.prototype处区别开来。</p><p>一个是：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki everforest-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#7FBBB3;">Teacher</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">prototype </span><span style="color:#E69875;">=</span><span style="color:#D3C6AA;"> Object</span><span style="color:#859289;">.</span><span style="color:#A7C080;">create</span><span style="color:#D3C6AA;">(</span><span style="color:#7FBBB3;">Person</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">prototype);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>使用Object.create赋值的Teacher构造一个实例<code>t</code>，并打印出来： <img src="`+r+'" alt="create_vs_new_1"></p><p>另一个是：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki everforest-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#7FBBB3;">Teacher</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">prototype </span><span style="color:#E69875;">=</span><span style="color:#E67E80;"> new</span><span style="color:#A7C080;"> Person</span><span style="color:#D3C6AA;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>使用new赋值的Teacher构造一个实例<code>tt</code>，并打印出来： <img src="'+t+'" alt="create_vs_new_2"></p><p>可以看到，用new的话存在一个缺点，在继承父类函数的时候调用了父类构造函数，导致子类的原型上多了不需要的父类属性，存在内存上的浪费。</p><p>而用Object.create可以解决无用的父类属性问题。</p><h3 id="xx-prototype-constructor-指向问题" tabindex="-1">\bxx.prototype.constructor 指向问题 <a class="header-anchor" href="#xx-prototype-constructor-指向问题" aria-label="Permalink to &quot;\bxx.prototype.constructor 指向问题&quot;">​</a></h3><p>因为我们把<code>Person.prototype</code>赋给了<code>Teacher.prototype</code>，所以此时<code>Teacher.prototype.constructor === Person</code>为true，这是不对的，对象的prototype.constructor应该正确指向自身，以确保原型链的正确。</p><p>我们分别新生成连个实例<code>t</code>和<code>tt</code>来分别对比区别：</p><p>未执行<code>Teacher.prototype.constructor = Teacher</code>的： <img src="'+c+'" alt="constructor_1"></p><p>执行了<code>Teacher.prototype.constructor = Teacher</code>的： <img src="'+i+`" alt="constructor_2"></p><p>我们可以看到，修正prototype.constructor指向后的实例的原型链上，constructor指向了自身(Teacher)。</p><h3 id="继承到多个对象-混入" tabindex="-1">继承到多个对象-混入 <a class="header-anchor" href="#继承到多个对象-混入" aria-label="Permalink to &quot;继承到多个对象-混入&quot;">​</a></h3><p>最后，如果你希望能继承到多个对象，则可以使用混入的方式。</p><p>示意代码：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki everforest-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E67E80;">function</span><span style="color:#A7C080;"> MyClass</span><span style="color:#D3C6AA;">()</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#D3C6AA;">  SuperClass</span><span style="color:#859289;">.</span><span style="color:#A7C080;">call</span><span style="color:#D3C6AA;">(</span><span style="color:#D699B6;">this</span><span style="color:#D3C6AA;">);</span></span>
<span class="line"><span style="color:#D3C6AA;">  OtherSuperClass</span><span style="color:#859289;">.</span><span style="color:#A7C080;">call</span><span style="color:#D3C6AA;">(</span><span style="color:#D699B6;">this</span><span style="color:#D3C6AA;">);</span></span>
<span class="line"><span style="color:#D3C6AA;">}</span></span>
<span class="line"><span style="color:#859289;font-style:italic;">// 继承一个类</span></span>
<span class="line"><span style="color:#7FBBB3;">MyClass</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">prototype </span><span style="color:#E69875;">=</span><span style="color:#D3C6AA;"> Object</span><span style="color:#859289;">.</span><span style="color:#A7C080;">create</span><span style="color:#D3C6AA;">(</span><span style="color:#7FBBB3;">SuperClass</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">prototype);</span></span>
<span class="line"><span style="color:#859289;font-style:italic;">// 混合其它</span></span>
<span class="line"><span style="color:#D3C6AA;">Object</span><span style="color:#859289;">.</span><span style="color:#A7C080;">assign</span><span style="color:#D3C6AA;">(</span><span style="color:#7FBBB3;">MyClass</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">prototype, </span><span style="color:#7FBBB3;">OtherSuperClass</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">prototype);</span></span>
<span class="line"><span style="color:#859289;font-style:italic;">// 重新指定constructor</span></span>
<span class="line"><span style="color:#7FBBB3;">MyClass</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">prototype</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">constructor </span><span style="color:#E69875;">=</span><span style="color:#D3C6AA;"> MyClass;</span></span>
<span class="line"><span style="color:#7FBBB3;">MyClass</span><span style="color:#859289;">.</span><span style="color:#D3C6AA;">prototype</span><span style="color:#859289;">.</span><span style="color:#A7C080;">myMethod</span><span style="color:#E69875;"> =</span><span style="color:#E67E80;"> function</span><span style="color:#D3C6AA;">()</span><span style="color:#D3C6AA;"> {</span></span>
<span class="line"><span style="color:#859289;font-style:italic;">     // do a thing</span></span>
<span class="line"><span style="color:#D3C6AA;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-label="Permalink to &quot;参考资料&quot;">​</a></h2><p><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Inheritance" target="_blank" rel="noreferrer">Inheritance in JavaScript - Learn web development | MDN</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create" target="_blank" rel="noreferrer">Object.create | MDN</a></p><p><a href="https://segmentfault.com/a/1190000014592412" target="_blank" rel="noreferrer">js继承实现之Object.create</a></p>`,87)]))}const g=n(y,[["render",A]]);export{m as __pageData,g as default};
